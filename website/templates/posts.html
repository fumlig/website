{% extends "base.html" %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="/css/post.css">
<link rel="stylesheet" type="text/css" href="/css/posts.css">
{% endblock %}

{% block scripts %}
<script src="/js/search-posts.js"></script>
{% endblock %}

{% block main %}
<section>
<h1>{{ page.title }}</h1>
{{ page.content|safe }}

<h2>All posts</h2>

<input type="text" id="search-posts" onkeyup="searchPosts()" placeholder="Filter...">
{%- set tags = [] %}{% for post in groups.posts %}{% for tag in post.meta.tags %}{% if not tag in tags %}{% if tags.append(tag) %}{% endif %}{% endif %}{% endfor %}{% endfor %}
<p>
{% for tag in tags -%}
<a href="#" onclick="searchPostsFor(this.innerText)">{{ tag }}</a>{{ " :: " if not loop.last }}
{% endfor -%}
</p>

<div id="posts">
{% for post in groups.posts|sort(attribute="created", reverse=True) %}
{% include "post-preview.html" %}
{% endfor %}
</div>

</section>
{% endblock %}